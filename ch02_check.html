<!DOCTYPE html>  
<html lang="zh-CN">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>Hacker's Delight Ch02 - çŸ¥è¯†ç‚¹è¿›åº¦è‡ªæŸ¥è¡¨</title>  
    <style>  
        * {  
            margin: 0;  
            padding: 0;  
            box-sizing: border-box;  
        }  

        body {  
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', sans-serif;  
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);  
            min-height: 100vh;  
            padding: 20px;
            padding-left: 200px;
        }

        /* å·¦ä¾§ç« èŠ‚å¯¼èˆªæ  */
        .sidebar-nav {
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            width: 180px;
            z-index: 90;
            background: rgba(102, 126, 234, 0.95);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            padding: 1rem .5rem;
            overflow-y: auto;
            overflow-x: hidden;
            transition: transform .25s ease;
            display: flex;
            flex-direction: column;
        }

        .sidebar-nav::-webkit-scrollbar {
            width: 3px;
        }

        .sidebar-nav::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
        }

        .sidebar-title {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: .62rem;
            color: white;
            letter-spacing: .08em;
            padding: .4rem .6rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: .5rem;
            flex-shrink: 0;
            font-weight: bold;
        }

        .sidebar-section {
            margin-bottom: .6rem;
            display: flex;
            flex-direction: column;
        }

        .sidebar-section-title {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: .58rem;
            color: rgba(255, 255, 255, 0.8);
            padding: .3rem .6rem;
            letter-spacing: .05em;
            flex-shrink: 0;
        }

        .sidebar-link {
            display: block;
            width: 100%;
            clear: both;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: .68rem;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            padding: .25rem .6rem .25rem 1rem;
            border-radius: 3px;
            transition: all .15s;
            position: relative;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .sidebar-link:hover {
            color: white;
            background: rgba(255, 255, 255, 0.15);
        }

        .sidebar-link.active {
            color: white;
            background: rgba(255, 255, 255, 0.25);
        }

        .sidebar-link.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 2px;
            height: 14px;
            background: white;
            border-radius: 1px;
        }

        .sidebar-toggle {
            display: none;
            position: fixed;
            left: .5rem;
            top: .85rem;
            z-index: 95;
            width: 32px;
            height: 32px;
            background: rgba(102, 126, 234, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
        }

        @media(max-width: 1100px) {
            .sidebar-nav {
                transform: translateX(-100%);
            }

            .sidebar-nav.open {
                transform: translateX(0);
            }

            .sidebar-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            body {
                padding-left: 0 !important;
            }
        }

        @media(min-width: 1101px) {
            body {
                padding-left: 180px !important;
            }
        }


        .container {  
            max-width: 1400px;  
            margin: 0 auto;  
        }  

        .header {  
            text-align: center;  
            color: white;  
            margin-bottom: 30px;  
            animation: slideDown 0.6s ease-out;  
        }  

        .header h1 {  
            font-size: 2.2em;  
            margin-bottom: 10px;  
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);  
        }  

        .header p {  
            font-size: 1em;  
            opacity: 0.95;  
        }  

        .progress-summary {  
            display: grid;  
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));  
            gap: 20px;  
            margin-bottom: 30px;  
        }  

        .progress-card {  
            background: white;  
            border-radius: 16px;  
            padding: 25px;  
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);  
            animation: fadeIn 0.6s ease-out;  
        }  

        .progress-card:nth-child(2) {  
            animation-delay: 0.1s;  
        }  

        .progress-card:nth-child(3) {  
            animation-delay: 0.2s;  
        }  

        .progress-card:nth-child(4) {  
            animation-delay: 0.3s;  
        }  

        .card-label {  
            font-size: 0.9em;  
            color: #666;  
            margin-bottom: 12px;  
            font-weight: 600;  
        }  

        .card-number {  
            font-size: 2.8em;  
            font-weight: bold;  
            color: #667eea;  
            line-height: 1;  
            margin-bottom: 8px;  
        }  

        .card-unit {  
            font-size: 0.9em;  
            color: #999;  
        }  

        /* åœ†å½¢è¿›åº¦æ¡ */  
        .circular-progress {  
            width: 180px;  
            height: 180px;  
            margin: 0 auto 20px;  
            position: relative;  
        }  

        .circular-bg {  
            width: 100%;  
            height: 100%;  
            border-radius: 50%;  
            background: conic-gradient(#667eea 0deg, #667eea 0deg, #e8e8e8 0deg, #e8e8e8 360deg);  
            display: flex;  
            align-items: center;  
            justify-content: center;  
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);  
            transition: all 0.3s ease;  
        }  

        .circular-inner {  
            width: 160px;  
            height: 160px;  
            border-radius: 50%;  
            background: white;  
            display: flex;  
            flex-direction: column;  
            align-items: center;  
            justify-content: center;  
            font-size: 2em;  
            font-weight: bold;  
            color: #667eea;  
        }  

        .progress-percent {  
            font-size: 1.2em;  
        }  

        .progress-text {  
            font-size: 0.7em;  
            color: #999;  
        }  

        /* ä¸»å†…å®¹åŒºåŸŸ */  
        .main-content {  
            display: grid;  
            grid-template-columns: 1fr 1fr;  
            gap: 30px;  
            margin-bottom: 30px;  
        }  

        .section-box {  
            background: white;  
            border-radius: 16px;  
            padding: 25px;  
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);  
        }  

        .section-title {  
            font-size: 1.4em;  
            color: #333;  
            font-weight: bold;  
            margin-bottom: 20px;  
            padding-bottom: 12px;  
            border-bottom: 3px solid #667eea;  
            display: flex;  
            align-items: center;  
            gap: 10px;  
        }  

        .section-icon {  
            font-size: 1.4em;  
        }  

        .checklist-item {  
            padding: 15px;  
            margin-bottom: 12px;  
            background: #f9f9f9;  
            border-radius: 8px;  
            display: flex;  
            align-items: flex-start;  
            gap: 12px;  
            cursor: pointer;  
            transition: all 0.2s ease;  
            border-left: 3px solid #ddd;  
        }  

        .checklist-item:hover {  
            background: #f0f7ff;  
            border-left-color: #667eea;  
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);  
        }  

        .checklist-item.completed {  
            background: #f0fff0;  
            border-left-color: #00b894;  
        }  

        .checklist-item.completed:hover {  
            background: #e8ffe8;  
        }  

        .checkbox {  
            width: 22px;  
            height: 22px;  
            min-width: 22px;  
            border: 2px solid #ddd;  
            border-radius: 4px;  
            display: flex;  
            align-items: center;  
            justify-content: center;  
            cursor: pointer;  
            transition: all 0.2s ease;  
            margin-top: 2px;  
        }  

        .checklist-item:hover .checkbox {  
            border-color: #667eea;  
        }  

        .checklist-item.completed .checkbox {  
            background: #00b894;  
            border-color: #00b894;  
            color: white;  
            font-weight: bold;  
        }  

        .checkbox-check {  
            font-size: 0.8em;  
            font-weight: bold;  
        }  

        .item-content {  
            flex: 1;  
        }  

        .item-title {  
            font-weight: 600;  
            color: #333;  
            margin-bottom: 4px;  
            font-size: 0.95em;  
        }  

        .item-desc {  
            font-size: 0.85em;  
            color: #666;  
            line-height: 1.4;  
        }  

        .item-formula {  
            background: white;  
            padding: 6px 10px;  
            border-radius: 4px;  
            font-family: 'Courier New', monospace;  
            font-size: 0.8em;  
            color: #d63031;  
            margin-top: 6px;  
            display: inline-block;  
        }  

        .item-priority {  
            display: inline-block;  
            padding: 4px 8px;  
            border-radius: 4px;  
            font-size: 0.75em;  
            font-weight: bold;  
            margin-top: 6px;  
            margin-right: 6px;  
        }  

        .priority-high {  
            background: #ffebee;  
            color: #d63031;  
        }  

        .priority-medium {  
            background: #fff3e0;  
            color: #f39c12;  
        }  

        .priority-low {  
            background: #e8f5e9;  
            color: #00b894;  
        }  

        /* è¿›åº¦æ¡ */  
        .progress-bar-container {  
            margin-top: 20px;  
            padding-top: 20px;  
            border-top: 1px solid #ddd;  
        }  

        .progress-bar-label {  
            display: flex;  
            justify-content: space-between;  
            margin-bottom: 10px;  
            font-size: 0.9em;  
            font-weight: 600;  
            color: #333;  
        }  

        .progress-bar {  
            width: 100%;  
            height: 10px;  
            background: #e8e8e8;  
            border-radius: 5px;  
            overflow: hidden;  
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);  
        }  

        .progress-fill {  
            height: 100%;  
            background: linear-gradient(90deg, #667eea, #764ba2);  
            transition: width 0.4s ease;  
            border-radius: 5px;  
        }  

        /* å³ä¾§é¢æ¿ */  
        .right-panel {  
            display: flex;  
            flex-direction: column;  
            gap: 30px;
            position: sticky;
            top: 20px;
            align-self: start;
        }
 +++++++ REPLACE

        .statistics-box {  
            background: white;  
            border-radius: 16px;  
            padding: 25px;  
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);  
        }  

        .stat-grid {  
            display: grid;  
            grid-template-columns: 1fr 1fr;  
            gap: 15px;  
            margin-bottom: 20px;  
        }  

        .stat-item {  
            background: linear-gradient(135deg, #667eea15, #764ba215);  
            padding: 15px;  
            border-radius: 8px;  
            border-left: 3px solid #667eea;  
            text-align: center;  
        }  

        .stat-number {  
            font-size: 1.8em;  
            font-weight: bold;  
            color: #667eea;  
            line-height: 1;  
            margin-bottom: 4px;  
        }  

        .stat-label {  
            font-size: 0.8em;  
            color: #666;  
            font-weight: 500;  
        }  

        /* é˜¶æ®µè¿›åº¦ */  
        .phase-progress {  
            margin-top: 15px;  
        }  

        .phase-item {  
            padding: 12px;  
            margin-bottom: 10px;  
            background: #f9f9f9;  
            border-radius: 6px;  
            display: flex;  
            justify-content: space-between;  
            align-items: center;  
            border-left: 3px solid #ddd;  
            transition: all 0.2s ease;  
        }  

        .phase-item:hover {  
            background: #f0f7ff;  
            border-left-color: #667eea;  
        }  

        .phase-name {  
            font-weight: 600;  
            color: #333;  
            font-size: 0.9em;  
        }  

        .phase-percent {  
            font-size: 0.85em;  
            color: #667eea;  
            font-weight: bold;  
        }  

        /* å»ºè®®é¢æ¿ */  
        .recommendation-box {  
            background: white;  
            border-radius: 16px;  
            padding: 25px;  
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);  
        }  

        .recommendation-item {  
            padding: 15px;  
            margin-bottom: 12px;  
            background: linear-gradient(135deg, #667eea15, #764ba215);  
            border-radius: 8px;  
            border-left: 3px solid #667eea;  
        }  

        .recommendation-title {  
            font-weight: 600;  
            color: #667eea;  
            margin-bottom: 6px;  
            font-size: 0.95em;  
        }  

        .recommendation-text {  
            font-size: 0.85em;  
            color: #666;  
            line-height: 1.5;  
        }  

        /* åº•éƒ¨æ“ä½œæ  */  
        .action-bar {  
            background: white;  
            border-radius: 16px;  
            padding: 25px;  
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);  
            display: flex;  
            gap: 15px;  
            flex-wrap: wrap;  
            justify-content: center;  
        }  

        .btn {  
            padding: 12px 24px;  
            border: none;  
            border-radius: 8px;  
            font-weight: 600;  
            font-size: 0.95em;  
            cursor: pointer;  
            transition: all 0.2s ease;  
            display: flex;  
            align-items: center;  
            gap: 8px;  
        }  

        .btn-primary {  
            background: #667eea;  
            color: white;  
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);  
        }  

        .btn-primary:hover {  
            background: #5568d3;  
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);  
        }  

        .btn-secondary {  
            background: #f9f9f9;  
            color: #333;  
            border: 2px solid #ddd;  
        }  

        .btn-secondary:hover {  
            background: #f0f7ff;  
            border-color: #667eea;  
        }  

        .btn-success {  
            background: #00b894;  
            color: white;  
            box-shadow: 0 4px 12px rgba(0, 184, 148, 0.3);  
        }  

        .btn-success:hover {  
            background: #009e77;  
            box-shadow: 0 6px 16px rgba(0, 184, 148, 0.4);  
        }  

        /* æ¨¡æ€æ¡† */  
        .modal {  
            display: none;  
            position: fixed;  
            top: 0;  
            left: 0;  
            width: 100%;  
            height: 100%;  
            background: rgba(0,0,0,0.5);  
            z-index: 1000;  
            align-items: center;  
            justify-content: center;  
            animation: fadeIn 0.3s ease;  
        }  

        .modal.active {  
            display: flex;  
        }  

        .modal-content {  
            background: white;  
            border-radius: 16px;  
            padding: 30px;  
            max-width: 600px;  
            width: 90%;  
            max-height: 80vh;  
            overflow-y: auto;  
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);  
            animation: slideUp 0.3s ease;  
        }  

        .modal-header {  
            font-size: 1.5em;  
            font-weight: bold;  
            color: #333;  
            margin-bottom: 20px;  
            display: flex;  
            justify-content: space-between;  
            align-items: center;  
        }  

        .modal-close {  
            background: none;  
            border: none;  
            font-size: 1.5em;  
            cursor: pointer;  
            color: #999;  
        }  

        .modal-close:hover {  
            color: #333;  
        }  

        /* æˆå°±ç³»ç»Ÿ */  
        .achievement-box {  
            background: linear-gradient(135deg, #667eea, #764ba2);  
            color: white;  
            border-radius: 16px;  
            padding: 25px;  
            text-align: center;  
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);  
            margin-bottom: 30px;  
            animation: slideUp 0.6s ease-out;  
        }  

        .achievement-icon {  
            font-size: 3em;  
            margin-bottom: 12px;  
        }  

        .achievement-text {  
            font-size: 1.1em;  
            font-weight: 600;  
            margin-bottom: 8px;  
        }  

        .achievement-desc {  
            font-size: 0.9em;  
            opacity: 0.95;  
        }  

        /* åŠ¨ç”» */  
        @keyframes slideDown {  
            from {  
                opacity: 0;  
                transform: translateY(-30px);  
            }  
            to {  
                opacity: 1;  
                transform: translateY(0);  
            }  
        }  

        @keyframes slideUp {  
            from {  
                opacity: 0;  
                transform: translateY(30px);  
            }  
            to {  
                opacity: 1;  
                transform: translateY(0);  
            }  
        }  

        @keyframes fadeIn {  
            from {  
                opacity: 0;  
            }  
            to {  
                opacity: 1;  
            }  
        }  

        @keyframes pulse {  
            0%, 100% {  
                transform: scale(1);  
            }  
            50% {  
                transform: scale(1.05);  
            }  
        }  

        .pulse {  
            animation: pulse 0.6s ease-in-out;  
        }  

        /* å“åº”å¼ */  
        @media (max-width: 1024px) {  
            .main-content {  
                grid-template-columns: 1fr;  
            }  

            .right-panel {  
                grid-column: 1;  
            }  
        }  

        @media (max-width: 768px) {  
            .progress-summary {  
                grid-template-columns: 1fr 1fr;  
            }  

            .header h1 {  
                font-size: 1.6em;  
            }  

            .stat-grid {  
                grid-template-columns: 1fr;  
            }  

            .action-bar {  
                flex-direction: column;  
            }  

            .btn {  
                width: 100%;  
                justify-content: center;  
            }  
        }  

        /* æœç´¢å’Œè¿‡æ»¤ */  
        .filter-bar {  
            background: white;  
            border-radius: 12px;  
            padding: 15px;  
            margin-bottom: 20px;  
            display: flex;  
            gap: 10px;  
            flex-wrap: wrap;  
        }  

        .filter-btn {  
            padding: 8px 14px;  
            border: 2px solid #ddd;  
            background: white;  
            border-radius: 20px;  
            cursor: pointer;  
            font-size: 0.85em;  
            font-weight: 600;  
            transition: all 0.2s ease;  
        }  

        .filter-btn.active {  
            background: #667eea;  
            color: white;  
            border-color: #667eea;  
        }  

        .filter-btn:hover {  
            border-color: #667eea;  
        }  

        /* å®Œæˆåº¦æŒ‡ç¤º */  
        .completion-indicator {  
            display: inline-flex;  
            gap: 3px;  
            margin-left: 8px;  
        }  

        .indicator-dot {  
            width: 6px;  
            height: 6px;  
            border-radius: 50%;  
            background: #ddd;  
        }  

        .indicator-dot.filled {  
            background: #667eea;  
        }  
    </style>  
    </head>  
<body>
    <!-- å·¦ä¾§ç« èŠ‚å¯¼èˆªæ  -->
    <button class="sidebar-toggle" onclick="document.querySelector('.sidebar-nav').classList.toggle('open')">â˜°</button>
    <nav class="sidebar-nav">
      <div class="sidebar-title">ğŸ“š CH02 å­¦ä¹ å¯¼èˆª</div>
      
      <div class="sidebar-section">
        <div class="sidebar-section-title">Ch.02 è¡¥å……é¡µé¢</div>
        <a href="ch02_quickref.html" class="sidebar-link">å¿«é€Ÿè®°å¿†å¡ç‰‡</a>
        <a href="ch02_interactive.html" class="sidebar-link">åŠ¨ç”»äº¤äº’å­¦ä¹ </a>
        <a href="ch02_mindmap.html" class="sidebar-link">å®Œæ•´æ€ç»´å¯¼å›¾</a>
        <a href="ch02_anaylze.html" class="sidebar-link">çŸ¥è¯†ç‚¹ç»Ÿè®¡</a>
        <a href="ch02_check.html" class="sidebar-link active">å­¦ä¹ è¿›åº¦è‡ªæŸ¥</a>
        <a href="ch02_summary.html" class="sidebar-link">çŸ¥è¯†ç‚¹ç»Ÿè®¡è¯¦è¡¨</a>
      </div>
      
      <div class="sidebar-section">
        <div class="sidebar-section-title">è¿”å›ä¸»é¡µé¢</div>
        <a href="ch02.html" class="sidebar-link">Ch.02 ä¸»ç« èŠ‚</a>
      </div>
    </nav>

    <div class="container">
 +++++++ REPLACE
        <!-- æ ‡é¢˜ -->  
        <div class="header">  
            <h1>ğŸ“š Hacker's Delight Ch02 - çŸ¥è¯†ç‚¹è¿›åº¦è‡ªæŸ¥è¡¨</h1>  
            <p>ç‚¹å‡»æ–¹æ¡†æ ‡è®°å·²å­¦å†…å®¹ï¼Œå®æ—¶è¿½è¸ªå­¦ä¹ è¿›åº¦</p>  
        </div>  

        <!-- è¿›åº¦æ¦‚è§ˆå¡ç‰‡ -->  
        <div class="progress-summary">  
            <div class="progress-card">  
                <div class="card-label">æ€»ä½“å­¦ä¹ è¿›åº¦</div>  
                <div class="circular-progress">  
                    <div class="circular-bg" id="totalProgressBg">  
                        <div class="circular-inner">  
                            <div class="progress-percent" id="totalPercent">0%</div>  
                            <div class="progress-text">å®Œæˆ</div>  
                        </div>  
                    </div>  
                </div>  
                <div class="progress-bar-container">  
                    <div class="progress-bar">  
                        <div class="progress-fill" id="totalProgressFill" style="width: 0%"></div>  
                    </div>  
                </div>  
            </div>  

            <div class="progress-card">  
                <div class="card-label">å·²å®ŒæˆçŸ¥è¯†ç‚¹</div>  
                <div class="card-number" id="completedCount">0</div>  
                <div class="card-unit">/ 142 ä¸ªçŸ¥è¯†ç‚¹</div>  
                <div class="progress-bar-container">  
                    <div class="progress-bar">  
                        <div class="progress-fill" id="completedProgressFill" style="width: 0%"></div>  
                    </div>  
                </div>  
            </div>  

            <div class="progress-card">  
                <div class="card-label">ä¼˜å…ˆçº§åˆ†å¸ƒ</div>  
                <div style="margin-top: 15px;">  
                    <div style="display: flex; gap: 8px; margin-bottom: 10px; align-items: center;">  
                        <span style="width: 50px; font-size: 0.85em; font-weight: 600;">â­â­â­</span>  
                        <div class="progress-bar" style="flex: 1;">  
                            <div class="progress-fill" id="highPriorityFill" style="width: 0%; background: #d63031;"></div>  
                        </div>  
                        <span id="highPriorityPercent" style="width: 40px; text-align: right; font-weight: 600;">0%</span>  
                    </div>  
                    <div style="display: flex; gap: 8px; margin-bottom: 10px; align-items: center;">  
                        <span style="width: 50px; font-size: 0.85em; font-weight: 600;">â­â­</span>  
                        <div class="progress-bar" style="flex: 1;">  
                            <div class="progress-fill" id="mediumPriorityFill" style="width: 0%; background: #f39c12;"></div>  
                        </div>  
                        <span id="mediumPriorityPercent" style="width: 40px; text-align: right; font-weight: 600;">0%</span>  
                    </div>  
                    <div style="display: flex; gap: 8px; align-items: center;">  
                        <span style="width: 50px; font-size: 0.85em; font-weight: 600;">â­</span>  
                        <div class="progress-bar" style="flex: 1;">  
                            <div class="progress-fill" id="lowPriorityFill" style="width: 0%; background: #00b894;"></div>  
                        </div>  
                        <span id="lowPriorityPercent" style="width: 40px; text-align: right; font-weight: 600;">0%</span>  
                    </div>  
                </div>  
            </div>  

            <div class="progress-card">  
                <div class="card-label">å­¦ä¹ é˜¶æ®µè¿›åº¦</div>  
                <div class="phase-progress" id="phaseProgress"></div>  
            </div>  
        </div>  

        <!-- æˆå°±æç¤º -->  
        <div id="achievementBox"></div>  

        <!-- ä¸»å†…å®¹ -->  
        <div class="main-content">  
            <!-- å·¦ä¾§æ¸…å• -->  
            <div>  
                <div class="section-box">  
                    <div class="section-title">  
                        <span class="section-icon">ğŸ”§</span>  
                        <span>æœ€å³ä½æ“çºµ (TRICKS 01-08)</span>  
                        <div class="completion-indicator" id="tricks-indicator"></div>  
                    </div>  
                    <div class="filter-bar">  
                        <button class="filter-btn active" onclick="filterItems('tricks', 'all')">å…¨éƒ¨</button>  
                        <button class="filter-btn" onclick="filterItems('tricks', 'completed')">å·²å®Œæˆ</button>  
                        <button class="filter-btn" onclick="filterItems('tricks', 'pending')">å¾…å­¦ä¹ </button>  
                    </div>  
                    <div id="tricks-list"></div>  
                    <div class="progress-bar-container">  
                        <div class="progress-bar-label">  
                            <span>è¿›åº¦</span>  
                            <span id="tricks-percent">0%</span>  
                        </div>  
                        <div class="progress-bar">  
                            <div class="progress-fill" id="tricks-fill" style="width: 0%"></div>  
                        </div>  
                    </div>  
                </div>  

                <div class="section-box" style="margin-top: 20px;">  
                    <div class="section-title">  
                        <span class="section-icon">â•</span>  
                        <span>åŠ å‡æ³•æ’ç­‰å¼ (7ä¸ª)</span>  
                        <div class="completion-indicator" id="formula-indicator"></div>  
                    </div>  
                    <div class="filter-bar">  
                        <button class="filter-btn active" onclick="filterItems('formula', 'all')">å…¨éƒ¨</button>  
                        <button class="filter-btn" onclick="filterItems('formula', 'completed')">å·²å®Œæˆ</button>  
                        <button class="filter-btn" onclick="filterItems('formula', 'pending')">å¾…å­¦ä¹ </button>  
                    </div>  
                    <div id="formula-list"></div>  
                    <div class="progress-bar-container">  
                        <div class="progress-bar-label">  
                            <span>è¿›åº¦</span>  
                            <span id="formula-percent">0%</span>  
                        </div>  
                        <div class="progress-bar">  
                            <div class="progress-fill" id="formula-fill" style="width: 0%"></div>  
                        </div>  
                    </div>  
                </div>  

                <div class="section-box" style="margin-top: 20px;">  
                    <div class="section-title">  
                        <span class="section-icon">âš¡</span>  
                        <span>æ— åˆ†æ”¯ç®—æœ¯ (6ä¸ª)</span>  
                        <div class="completion-indicator" id="branchless-indicator"></div>  
                    </div>  
                    <div class="filter-bar">  
                        <button class="filter-btn active" onclick="filterItems('branchless', 'all')">å…¨éƒ¨</button>  
                        <button class="filter-btn" onclick="filterItems('branchless', 'completed')">å·²å®Œæˆ</button>  
                        <button class="filter-btn" onclick="filterItems('branchless', 'pending')">å¾…å­¦ä¹ </button>  
                    </div>  
                    <div id="branchless-list"></div>  
                    <div class="progress-bar-container">  
                        <div class="progress-bar-label">  
                            <span>è¿›åº¦</span>  
                            <span id="branchless-percent">0%</span>  
                        </div>  
                        <div class="progress-bar">  
                            <div class="progress-fill" id="branchless-fill" style="width: 0%"></div>  
                        </div>  
                    </div>  
                </div>  

                <div class="section-box" style="margin-top: 20px;">  
                    <div class="section-title">  
                        <span class="section-icon">ğŸ”€</span>  
                        <span>MUXå¤šè·¯é€‰æ‹©å™¨ (2ä¸ª)</span>  
                        <div class="completion-indicator" id="mux-indicator"></div>  
                    </div>  
                    <div id="mux-list"></div>  
                    <div class="progress-bar-container">  
                        <div class="progress-bar-label">  
                            <span>è¿›åº¦</span>  
                            <span id="mux-percent">0%</span>  
                        </div>  
                        <div class="progress-bar">  
                            <div class="progress-fill" id="mux-fill" style="width: 0%"></div>  
                        </div>  
                    </div>  
                </div>  

                <div class="section-box" style="margin-top: 20px;">  
                    <div class="section-title">  
                        <span class="section-icon">ğŸŒŸ</span>  
                        <span>Gosper's Hack (4æ­¥)</span>  
                        <div class="completion-indicator" id="gosper-indicator"></div>  
                    </div>  
                    <div id="gosper-list"></div>  
                    <div class="progress-bar-container">  
                        <div class="progress-bar-label">  
                            <span>è¿›åº¦</span>  
                            <span id="gosper-percent">0%</span>  
                        </div>  
                        <div class="progress-bar">  
                            <div class="progress-fill" id="gosper-fill" style="width: 0%"></div>  
                        </div>  
                    </div>  
                </div>  

                <div class="section-box" style="margin-top: 20px;">  
                    <div class="section-title">  
                        <span class="section-icon">ğŸ</span>  
                        <span>ç‰¹æ®ŠæŠ€å·§ (8ä¸ª)</span>  
                        <div class="completion-indicator" id="special-indicator"></div>  
                    </div>  
                    <div class="filter-bar">  
                        <button class="filter-btn active" onclick="filterItems('special', 'all')">å…¨éƒ¨</button>  
                        <button class="filter-btn" onclick="filterItems('special', 'completed')">å·²å®Œæˆ</button>  
                        <button class="filter-btn" onclick="filterItems('special', 'pending')">å¾…å­¦ä¹ </button>  
                    </div>  
                    <div id="special-list"></div>  
                    <div class="progress-bar-container">  
                        <div class="progress-bar-label">  
                            <span>è¿›åº¦</span>  
                            <span id="special-percent">0%</span>  
                        </div>  
                        <div class="progress-bar">  
                            <div class="progress-fill" id="special-fill" style="width: 0%"></div>  
                        </div>  
                    </div>  
                </div>  

                <div class="section-box" style="margin-top: 20px;">  
                    <div class="section-title">  
                        <span class="section-icon">ğŸ“</span>  
                        <span>å¸ƒå°”åˆ†è§£å®šç† (5ä¸ª)</span>  
                        <div class="completion-indicator" id="boolean-indicator"></div>  
                    </div>  
                    <div id="boolean-list"></div>  
                    <div class="progress-bar-container">  
                        <div class="progress-bar-label">  
                            <span>è¿›åº¦</span>  
                            <span id="boolean-percent">0%</span>  
                        </div>  
                        <div class="progress-bar">  
                            <div class="progress-fill" id="boolean-fill" style="width: 0%"></div>  
                        </div>  
                    </div>  
                </div>  

                <div class="section-box" style="margin-top: 20px;">  
                    <div class="section-title">  
                        <span class="section-icon">
						â°</span>
                        <span>å†å²æ¼”å˜ (6ä¸ª)</span>
                        <div class="completion-indicator" id="history-indicator"></div>
                    </div>
                    <div id="history-list"></div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-label">
                            <span>è¿›åº¦</span>
                            <span id="history-percent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="history-fill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <div class="section-box" style="margin-top: 20px;">
                    <div class="section-title">
                        <span class="section-icon">ğŸ’­</span>
                        <span>æ·±åº¦ç‚¹è¯„ (5ä¸ª)</span>
                        <div class="completion-indicator" id="insight-indicator"></div>
                    </div>
                    <div id="insight-list"></div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-label">
                            <span>è¿›åº¦</span>
                            <span id="insight-percent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="insight-fill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <div class="section-box" style="margin-top: 20px;">
                    <div class="section-title">
                        <span class="section-icon">âœï¸</span>
                        <span>è¯¾åä¹ é¢˜ (6ä¸ª)</span>
                        <div class="completion-indicator" id="exercise-indicator"></div>
                    </div>
                    <div id="exercise-list"></div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-label">
                            <span>è¿›åº¦</span>
                            <span id="exercise-percent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="exercise-fill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å³ä¾§ç»Ÿè®¡é¢æ¿ -->
            <div class="right-panel">
                <div class="statistics-box">
                    <div class="section-title">
                        <span class="section-icon">ğŸ“Š</span>
                        <span>ç»Ÿè®¡æ•°æ®</span>
                    </div>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <div class="stat-number" id="totalItems">0</div>
                            <div class="stat-label">æ€»çŸ¥è¯†ç‚¹</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="completedItems">0</div>
                            <div class="stat-label">å·²å®Œæˆ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="pendingItems">0</div>
                            <div class="stat-label">å¾…å­¦ä¹ </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="completionRate">0%</div>
                            <div class="stat-label">å®Œæˆç‡</div>
                        </div>
                    </div>

                    <div style="margin-top: 25px; padding-top: 25px; border-top: 1px solid #ddd;">
                        <div style="font-weight: 600; color: #333; margin-bottom: 15px;">æŒ‰ä¼˜å…ˆçº§ç»Ÿè®¡</div>
                        <div class="stat-grid">
                            <div class="stat-item" style="border-left-color: #d63031;">
                                <div class="stat-number" style="color: #d63031;" id="highCount">0</div>
                                <div class="stat-label">â­â­â­</div>
                            </div>
                            <div class="stat-item" style="border-left-color: #f39c12;">
                                <div class="stat-number" style="color: #f39c12;" id="mediumCount">0</div>
                                <div class="stat-label">â­â­</div>
                            </div>
                            <div class="stat-item" style="border-left-color: #00b894;">
                                <div class="stat-number" style="color: #00b894;" id="lowCount">0</div>
                                <div class="stat-label">â­</div>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 25px; padding-top: 25px; border-top: 1px solid #ddd;">
                        <div style="font-weight: 600; color: #333; margin-bottom: 15px;">ä¼˜å…ˆçº§å®Œæˆæƒ…å†µ</div>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 6px; font-size: 0.9em;">
                                    <span style="font-weight: 600;">â­â­â­ å¿…å­¦</span>
                                    <span style="color: #d63031; font-weight: bold;" id="highCompleted">0/0</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="highProgressFill" style="width: 0%; background: #d63031;"></div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 6px; font-size: 0.9em;">
                                    <span style="font-weight: 600;">â­â­ é‡è¦</span>
                                    <span style="color: #f39c12; font-weight: bold;" id="mediumCompleted">0/0</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="mediumProgressFill" style="width: 0%; background: #f39c12;"></div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 6px; font-size: 0.9em;">
                                    <span style="font-weight: 600;">â­ å‚è€ƒ</span>
                                    <span style="color: #00b894; font-weight: bold;" id="lowCompleted">0/0</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="lowProgressFill" style="width: 0%; background: #00b894;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="recommendation-box">
                    <div class="section-title">
                        <span class="section-icon">ğŸ’¡</span>
                        <span>å­¦ä¹ å»ºè®®</span>
                    </div>
                    <div id="recommendationContent"></div>
                </div>

                <div class="statistics-box">
                    <div class="section-title">
                        <span class="section-icon">ğŸ¯</span>
                        <span>å­¦ä¹ é‡Œç¨‹ç¢‘</span>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <div style="padding: 12px; background: #f9f9f9; border-radius: 6px; border-left: 3px solid #ddd;">
                            <div style="font-weight: 600; color: #333; margin-bottom: 4px;">ç¬¬1é˜¶æ®µï¼šåŸºç¡€æŒæ¡</div>
                            <div style="font-size: 0.85em; color: #666; margin-bottom: 8px;">8ä¸ªTRICKS + 7ä¸ªæ’ç­‰å¼ + ç¬¦å·æ©ç </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="phase1Fill" style="width: 0%; background: #667eea;"></div>
                            </div>
                        </div>
                        <div style="padding: 12px; background: #f9f9f9; border-radius: 6px; border-left: 3px solid #ddd;">
                            <div style="font-weight: 600; color: #333; margin-bottom: 4px;">ç¬¬2é˜¶æ®µï¼šå®æˆ˜åº”ç”¨</div>
                            <div style="font-size: 0.85em; color: #666; margin-bottom: 8px;">6ä¸ªæ— åˆ†æ”¯ + Gosper + MUX</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="phase2Fill" style="width: 0%; background: #764ba2;"></div>
                            </div>
                        </div>
                        <div style="padding: 12px; background: #f9f9f9; border-radius: 6px; border-left: 3px solid #ddd;">
                            <div style="font-weight: 600; color: #333; margin-bottom: 4px;">ç¬¬3é˜¶æ®µï¼šæ·±åŒ–ç†è®º</div>
                            <div style="font-size: 0.85em; color: #666; margin-bottom: 8px;">ç‰¹æ®ŠæŠ€å·§ + å¸ƒå°”åˆ†è§£ + ä¹ é¢˜</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="phase3Fill" style="width: 0%; background: #f39c12;"></div>
                            </div>
                        </div>
                        <div style="padding: 12px; background: #f9f9f9; border-radius: 6px; border-left: 3px solid #ddd;">
                            <div style="font-weight: 600; color: #333; margin-bottom: 4px;">ç¬¬4é˜¶æ®µï¼šåº”ç”¨è¿ç§»</div>
                            <div style="font-size: 0.85em; color: #666; margin-bottom: 8px;">20+åº”ç”¨åœºæ™¯ + å†å²æ¼”å˜</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="phase4Fill" style="width: 0%; background: #00b894;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ“ä½œæ  -->
        <div class="action-bar">
            <button class="btn btn-primary" onclick="markAllCompleted()">
                <span>âœ…</span>
                <span>å…¨éƒ¨æ ‡è®°å·²å®Œæˆ</span>
            </button>
            <button class="btn btn-secondary" onclick="resetProgress()">
                <span>ğŸ”„</span>
                <span>é‡ç½®è¿›åº¦</span>
            </button>
            <button class="btn btn-secondary" onclick="exportData()">
                <span>ğŸ“¥</span>
                <span>å¯¼å‡ºè¿›åº¦</span>
            </button>
            <button class="btn btn-secondary" onclick="importData()">
                <span>ğŸ“¤</span>
                <span>å¯¼å…¥è¿›åº¦</span>
            </button>
            <button class="btn btn-success" onclick="printProgress()">
                <span>ğŸ–¨ï¸</span>
                <span>æ‰“å°æŠ¥å‘Š</span>
            </button>
        </div>
    </div>

    <!-- éšè—çš„æ–‡ä»¶è¾“å…¥ -->
    <input type="file" id="importFile" style="display: none;" accept=".json" onchange="handleImport(event)">

    <script>
        // çŸ¥è¯†ç‚¹æ•°æ®åº“
        const knowledgeBase = {
            tricks: [
                { id: 'trick-01', title: 'TRICK 01: æ¸…é™¤æœ€å³è¾¹çš„1', desc: 'x & (x-1) | åˆ¤æ–­2çš„å¹‚', priority: 'high', formula: 'x & (x - 1)' },
                { id: 'trick-02', title: 'TRICK 02: ç½®ä½æœ€å³è¾¹çš„0', desc: 'x | (x+1) | è¿ç»­0æ£€æµ‹', priority: 'medium', formula: 'x | (x + 1)' },
                { id: 'trick-03', title: 'TRICK 03: æ¸…é™¤å°¾éƒ¨è¿ç»­çš„1', desc: 'x & (x+1) | åˆ¤æ–­2â¿-1å½¢å¼', priority: 'medium', formula: 'x & (x + 1)' },
                { id: 'trick-04', title: 'TRICK 04: ç½®ä½å°¾éƒ¨è¿ç»­çš„0', desc: 'x | (x-1) | å†…å­˜å¯¹é½', priority: 'medium', formula: 'x | (x - 1)' },
                { id: 'trick-05', title: 'TRICK 05: æœ€å³è¾¹çš„0æ©ç ', desc: '~x & (x+1) | å•bitæå–', priority: 'low', formula: '~x & (x + 1)' },
                { id: 'trick-06', title: 'TRICK 06: æœ€å³è¾¹çš„1æ©ç ', desc: 'x & (-x) | æ£‹ç›˜å¼•æ“', priority: 'high', formula: 'x & (-x)' },
                { id: 'trick-07', title: 'TRICK 07: å°¾éƒ¨0çš„æ©ç ', desc: '~x & (x-1) | ä½ä½å¤„ç†', priority: 'low', formula: '~x & (x - 1)' },
                { id: 'trick-08', title: 'TRICK 08: å°¾éƒ¨1å³å¯¹é½ä¼ æ’­', desc: 'x | (x-1) | å­é›†æšä¸¾', priority: 'medium', formula: 'x | (x - 1)' },
            ],
            formula: [
                { id: 'formula-a', title: '(a) ç‹ç‰Œæ’ç­‰å¼', desc: 'x+y = (x^y)+((x&y)<<1) | åŠ æ³•åˆ†è§£', priority: 'high', formula: 'x+y = (x^y)+((x&y)<<1)' },
                { id: 'formula-b', title: '(b) OR/ANDåˆ†è§£', desc: 'x+y = (x|y)+(x&y) | ç­‰ä»·å½¢å¼', priority: 'medium', formula: 'x+y = (x|y)+(x&y)' },
                { id: 'formula-c', title: '(c) åå‘æ¨å¯¼', desc: 'x^y = (x+y)-((x&y)<<1)', priority: 'low', formula: 'x^y = (x+y)-((x&y)<<1)' },
                { id: 'formula-d', title: '(d) ORè¡¨ç¤ºæ³•', desc: 'x|y = (x+y)-(x&y)', priority: 'low', formula: 'x|y = (x+y)-(x&y)' },
                { id: 'formula-e', title: '(e) ANDè¡¨ç¤ºæ³•', desc: 'x&y = (x|y)-(x^y) | å¯¹å¶æ€§è´¨', priority: 'medium', formula: 'x&y = (x|y)-(x^y)' },
                { id: 'formula-f', title: '(f) Dietzæ— æº¢å‡ºå¹³å‡', desc: 'avg = (x&y)+((x^y)>>1) | JDKæ•‘æ˜Ÿ', priority: 'high', formula: 'avg = (x&y)+((x^y)>>1)' },
                { id: 'formula-g', title: '(g) XORåˆ†è§£', desc: 'x^y = (x|y)&~(x&y) | 4æŒ‡ä»¤', priority: 'low', formula: 'x^y = (x|y)&~(x&y)' },
            ],
            branchless: [
                { id: 'branchless-01', title: 'ç¬¦å·æ©ç å·¥å…·', desc: 'mask = x >> 31 | æ­£æ•°0ï¼Œè´Ÿæ•°-1', priority: 'medium', formula: 'mask = x >> 31' },
                { id: 'branchless-02', title: 'abs(x) - ç»å¯¹å€¼', desc: 'abs = (x+mask)^mask | 3æŒ‡ä»¤0åˆ†æ”¯', priority: 'high', formula: 'abs = (x + mask) ^ mask' },
                { id: 'branchless-03', title: 'min(x,y) - æœ€å°å€¼', desc: 'min = y+((x-y)&((x-y)>>31))', priority: 'medium', formula: 'min = y+((x-y)&((x-y)>>31))' },
                { id: 'branchless-04', title: 'max(x,y) - æœ€å¤§å€¼', desc: 'max = x-((x-y)&((x-y)>>31))', priority: 'medium', formula: 'max = x-((x-y)&((x-y)>>31))' },
                { id: 'branchless-05', title: 'avg(x,y) - å¹³å‡å€¼', desc: 'avg = (x&y)+((x^y)>>1) | SIMDå¿…ç”¨', priority: 'high', formula: 'avg = (x&y)+((x^y)>>1)' },
                { id: 'branchless-06', title: 'sign(x) - ç¬¦å·å‡½æ•°', desc: 'sign = (x>>31)|((-x)>>31) | -1/0/+1', priority: 'medium', formula: 'sign = (x>>31)|((-x)>>31)' },
            ],
            mux: [
                { id: 'mux-01', title: 'æ ‡å‡†MUX - 4æ¡æŒ‡ä»¤', desc: 'mux = (x&m)|(y&~m) | åŸºç¡€å½¢å¼', priority: 'medium', formula: 'mux = (x&m)|(y&~m)' },
                { id: 'mux-02', title: 'ä¼˜åŒ–MUX - 3æ¡æŒ‡ä»¤', desc: 'mux = ((x^y)&m)^y | ç¡¬ä»¶ä¼˜åŒ–', priority: 'high', formula: 'mux = ((x^y)&m)^y' },
            ],
            gosper: [
                { id: 'gosper-01', title: 'Step 1: æå–æœ€ä½1', desc: 'c = x & (-x) | è¿›ä½ç‚¹è¯†åˆ«', priority: 'high', formula: 'c = x & (-x)' },
                { id: 'gosper-02', title: 'Step 2: è¿›ä½ä¼ æ’­', desc: 'r = x + c | çº§è”ç¿»è½¬', priority: 'high', formula: 'r = x + c' },
                { id: 'gosper-03', title: 'Step 3: è®¡ç®—è¡¥1ä¸ªæ•°', desc: 'ones = (((r^x)/c)>>2)+1 | popcount', priority: 'high', formula: 'ones = (((r^x)/c)>>2)+1' },
                { id: 'gosper-04', title: 'Step 4: åˆå¹¶ç»“æœ', desc: 'result = r | ones | 100å€åŠ é€Ÿ', priority: 'high', formula: 'result = r | ones' },
            ],
            special: [
                { id: 'special-01', title: 'æº¢å‡ºæ£€æµ‹', desc: 'ov = ((x^sum)&(y^sum))>>31', priority: 'medium', formula: 'ov = ((x^sum)&(y^sum))>>31' },
                { id: 'special-02', title: 'é¥±å’ŒåŠ æ³•', desc: 'QADD/QSUB | éŸ³é¢‘å¤„ç†', priority: 'low', formula: 'QADD / QSUB' },
                { id: 'special-03', title: 'ç¬¦å·æ‰©å±•', desc: 'sign_ext = (x<<(32-n))>>(32-n)', priority: 'medium', formula: '(x<<(32-n))>>(32-n)' },
                { id: 'special-04', title: 'ä½åŸŸæå–/æ’å…¥', desc: 'æ©ç æ“ä½œ | ä½å›¾å¤„ç†', priority: 'low', formula: '(x>>p) & ((1<<n)-1)' },
                { id: 'special-05', title: 'Hornerè§„åˆ™', desc: '((ax+b)x+c)x+d | å“ˆå¸Œå‡½æ•°', priority: 'medium', formula: '((ax+b)x+c)x+d' },
                { id: 'special-06', title: 'ä½åŸŸå¤åˆ¶', desc: 'å¤åˆ¶bit iåˆ°bit j | çº¹ç†åæ ‡', priority: 'low', formula: '(x&~(1<<j))|...' },
                { id: 'special-07', title: 'å¤šå­—èŠ‚SIMDåŠ æ³•', desc: '4Ã—byteå¹¶è¡Œ | å›¾åƒå¤„ç†', priority: 'low', formula: 'å¤šå­—èŠ‚å¹¶è¡Œ' },
                { id: 'special-08', title: 'åŒå­—ç§»ä½', desc: 'SHLD/SHRD | 64ä½æ¨¡æ‹Ÿ', priority: 'low', formula: 'SHLD / SHRD' },
            ],
            boolean: [
                { id: 'boolean-01', title: 'Reed-Mullerå±•å¼€', desc: 'f = g âŠ• zÂ·h | ç†è®ºåŸºç¡€', priority: 'medium', formula: 'f = g âŠ• zÂ·h' },
                { id: 'boolean-02', title: 'Davioåˆ†è§£', desc: 'å¤šé¡¹å¼ä»£æ•°è¡¨ç¤º', priority: 'low', formula: 'å¤šé¡¹å¼å±•å¼€' },
                { id: 'boolean-03', title: 'å®ç°å¤æ‚åº¦', desc: '1å˜é‡1æŒ‡ä»¤, nå˜é‡~3næŒ‡ä»¤', priority: 'medium', formula: '~3næŒ‡ä»¤' },
                { id: 'boolean-04', title: 'çœŸå€¼è¡¨åˆ†æ', desc: '2^nç§å¯èƒ½ (nå˜é‡)', priority: 'low', formula: '2^n' },
                { id: 'boolean-05', title: 'SHA-256åº”ç”¨', desc: 'MAJ(x,y,z) = (x&y)|(y&z)|(z&x)', priority: 'medium', formula: '(x&y)|(y&z)|(z&x)' },
            ],
            history: [
                { id: 'history-01', title: '1961 - Strachey CACM', desc: 'æœ€æ—©æ­£å¼å‘è¡¨ä½æ“ä½œç†è®º', priority: 'low', formula: 'Strachey' },
                { id: 'history-02', title: '1972 - Gosper HAKMEM', desc: 'MIT AI Lab ä½æ“ä½œåœ£ç»', priority: 'low', formula: 'HAKMEM' },
                { id: 'history-03', title: '1986 - Dietz aggregate', desc: 'æ— æº¢å‡ºå¹³å‡ã€é­”æ³•é›†', priority: 'low', formula: 'aggregate.org' },
                { id: 'history-04', title: '1992 - GCC Superoptimizer', desc: 'ç¼–è¯‘å™¨è‡ªåŠ¨å‘ç°æŠ€å·§', priority: 'low', formula: 'Superoptimizer' },
                { id: 'history-05', title: '2006 - Bloch JDK bug', desc: 'äºŒåˆ†æœç´¢æº¢å‡ºæ½œä¼10å¹´', priority: 'low', formula: 'JDK' },
                { id: 'history-06', title: '2013 - x86 BMI1/BMI2', desc: 'è½¯ä»¶æŠ€å·§çƒ§è¿›ç¡¬ä»¶', priority: 'low', formula: 'BMI1/BMI2' },
            ],
            insight: [
                { id: 'insight-01', title: 'åˆ†æ”¯é¢„æµ‹é™·é˜±', desc: '10-20å‘¨æœŸæŸå¤±, 5-10å€æ€§èƒ½å·®å¼‚', priority: 'high', formula: '10-20 cycles' },
                { id: 'insight-02', title: 'æ•´æ•°æº¢å‡ºå®‰å…¨', desc: 'Dietzå…¬å¼, JDKæ½œä¼10å¹´', priority: 'high', formula: 'Dietz' },
                { id: 'insight-03', title: 'GosperåŠ é€ŸåŸç†', desc: 'ç»„åˆçˆ†ç‚¸æ•‘æ˜Ÿ, 100å€åŠ é€Ÿ', priority: 'high', formula: '100x' },
                { id: 'insight-04', title: 'è¯­è¨€å®ç°å·®å¼‚', desc: 'Rust/Java/C23å·®å¼‚å¤„ç†', priority: 'medium', formula: 'å¤šè¯­è¨€' },
                { id: 'insight-05', title: 'å¯æ¨å¹¿æ–¹å‘', desc: 'SIMD/GPU/å¯†ç å­¦/é‡å­è®¡ç®—', priority: 'medium', formula: 'åº”ç”¨æ‹“å±•' },
            ],
            exercise: [
                { id: 'exercise-01', title: 'Q3: Dietzæ— æº¢å‡ºè¯æ˜', desc: '(x&y)+((x^y)>>1) æ°¸ä¸æº¢å‡º', priority: 'medium', formula: 'è¯æ˜é¢˜' },
                { id: 'exercise-02', title: 'Q8: MUX 3æŒ‡ä»¤ä¼˜åŒ–', desc: '((x^y)&m)^y ç­‰ä»·æ€§è¯æ˜', priority: 'medium', formula: 'è¯æ˜é¢˜' },
                { id: 'exercise-03', title: 'Q10: ä½å¤åˆ¶é—®é¢˜', desc: 'å¤åˆ¶bit iåˆ°bit j', priority: 'low', formula: 'å®ç°é¢˜' },
                { id: 'exercise-04', title: 'Q11: å¸ƒå°”åˆ†è§£å®šç†', desc: 'nå…ƒå‡½æ•°æœ€å°‘æŒ‡ä»¤æ•°', priority: 'high', formula: 'ç†è®ºé¢˜' },
                { id: 'exercise-05', title: 'Q5: æ¡ä»¶æ¯”è¾ƒç®€åŒ–', desc: 'y>0æ—¶çš„ä¼˜åŒ–ç©ºé—´', priority: 'medium', formula: 'ä¼˜åŒ–é¢˜' },
                { id: 'exercise-06', title: 'Q4: å››æ•°æ— æº¢å‡ºå¹³å‡', desc: '(a+b+c+d)/4é€’å½’åº”ç”¨', priority: 'medium', formula: 'åº”ç”¨é¢˜' },
            ]
        };

        // çŠ¶æ€ç®¡ç†
        let progress = {};
        let currentFilter = {};

        // åˆå§‹åŒ–
        function initializeProgress() {
            // ä»localStorageè¯»å–è¿›åº¦
            const saved = localStorage.getItem('ch02_progress');
            if (saved) {
                progress = JSON.parse(saved);
            } else {
                // åˆå§‹åŒ–æ‰€æœ‰é¡¹ç›®ä¸ºæœªå®Œæˆ
                for (const [category, items] of Object.entries(knowledgeBase)) {
                    items.forEach(item => {
                        progress[item.id] = false;
                    });
                }
            }
            
            // åˆå§‹åŒ–è¿‡æ»¤çŠ¶æ€
            for (const category of Object.keys(knowledgeBase)) {
                currentFilter[category] = 'all';
            }

            renderAllItems();
            updateAllProgress();
        }

        // æ¸²æŸ“æ‰€æœ‰é¡¹ç›®
        function renderAllItems() {
            for (const [category, items] of Object.entries(knowledgeBase)) {
                const container = document.getElementById(`${category}-list`);
                if (!container) continue;

                const filter = currentFilter[category] || 'all';
                const filtered = items.filter(item => {
                    if (filter === 'completed') return progress[item.id];
                    if (filter === 'pending') return !progress[item.id];
                    return true;
                });

                container.innerHTML = filtered.map(item => createItemHTML(item, category)).join('');
            }
        }

        // åˆ›å»ºé¡¹ç›®HTML
        function createItemHTML(item, category) {
            const isCompleted = progress[item.id];
            const priorityClass = `priority-${item.priority}`;
            
            return `
                <div class="checklist-item ${isCompleted ? 'completed' : ''}" onclick="toggleItem('${item.id}')">
                    <div class="checkbox">
                        ${isCompleted ? '<span class="checkbox-check">âœ“</span>' : ''}
                    </div>
                    <div class="item-content">
                        <div class="item-title">${item.title}</div>
                        <div class="item-desc">${item.desc}</div>
                        <div style="margin-top: 8px;">
                            <span class="item-formula">${item.formula}</span>
                            <span class="item-priority ${priorityClass}">
                                ${'â­'.repeat(item.priority === 'high' ? 3 : item.priority === 'medium' ? 2 : 1)}
                            </span>
                        </div>
                    </div>
                </div>
            `;
        }

        // åˆ‡æ¢é¡¹ç›®å®ŒæˆçŠ¶æ€
        function toggleItem(itemId) {
            progress[itemId] = !progress[itemId];
            saveProgress();
            renderAllItems();
            updateAllProgress();
        }

        // æ›´æ–°æ‰€æœ‰è¿›åº¦
        function updateAllProgress() {
            let totalCompleted = 0;
            let totalItems = 0;
            let highCompleted = 0, highTotal = 0;
            let mediumCompleted = 0, mediumTotal = 0;
            let lowCompleted = 0, lowTotal = 0;

            // ç»Ÿè®¡æ€»ä½“è¿›åº¦
            for (const [category, items] of Object.entries(knowledgeBase)) {
                const categoryCompleted = items.filter(item => progress[item.id]).length;
                const categoryTotal = items.length;
                totalCompleted += categoryCompleted;
                totalItems += categoryTotal;

                // æŒ‰ä¼˜å…ˆçº§ç»Ÿè®¡
                items.forEach(item => {
                    if (item.priority === 'high') {
                        highTotal++;
                        if (progress[item.id]) highCompleted++;
                    } else if (item.priority === 'medium') {
                        mediumTotal++;
                        if (progress[item.id]) mediumCompleted++;
                    } else {
                        lowTotal++;
                        if (progress[item.id]) lowCompleted++;
                    }
                });

                // æ›´æ–°åˆ†ç±»è¿›åº¦
                const percent = categoryTotal > 0 ? Math.round(categoryCompleted / categoryTotal * 100) : 0;
                const fillEl = document.getElementById(`${category}-fill`);
                const percentEl = document.getElementById(`${category}-percent`);
                const indicatorEl = document.getElementById(`${category}-indicator`);

                if (fillEl) fillEl.style.width = percent + '%';
                if (percentEl) percentEl.textContent = percent + '%';
                
                // æ›´æ–°æŒ‡ç¤ºå™¨
                if (indicatorEl) {
                    indicatorEl.innerHTML = Array(Math.min(categoryTotal, 8))
                        .fill(0)
                        .map((_, i) => i < categoryCompleted)
                        .map(filled => `<div class="indicator-dot ${filled ? 'filled' : ''}"></div>`)
                        .join('');
                }
            }

            // æ›´æ–°æ€»ä½“è¿›åº¦
            const totalPercent = totalItems > 0 ? Math.round(totalCompleted / totalItems * 100) : 0;
            document.getElementById('totalPercent').textContent = totalPercent + '%';
            document.getElementById('totalProgressFill').style.width = totalPercent + '%';
            document.getElementById('totalProgressBg').style.conic = `conic-gradient(#667eea ${totalPercent}%, #e8e8e8 0%)`;

            document.getElementById('completedCount').textContent = totalCompleted;
            document.getElementById('completedProgressFill').style.width = totalPercent + '%';

            // æ›´æ–°ä¼˜å…ˆçº§è¿›åº¦
            const highPercent = highTotal > 0 ? Math.round(highCompleted / highTotal * 100) : 0;
            const mediumPercent = mediumTotal > 0 ? Math.round(mediumCompleted / mediumTotal * 100) : 0;
            const lowPercent = lowTotal > 0 ? Math.round(lowCompleted / lowTotal * 100) : 0;

            document.getElementById('highPriorityFill').style.width = highPercent + '%';
            document.getElementById('highPriorityPercent').textContent = highPercent + '%';
            document.getElementById('mediumPriorityFill').style.width = mediumPercent + '%';
            document.getElementById('mediumPriorityPercent').textContent = mediumPercent + '%';
            document.getElementById('lowPriorityFill').style.width = lowPercent + '%';
            document.getElementById('lowPriorityPercent').textContent = lowPercent + '%';

            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            document.getElementById('totalItems').textContent = totalItems;
            document.getElementById('completedItems').textContent = totalCompleted;
            document.getElementById('pendingItems').textContent = totalItems - totalCompleted;
            document.getElementById('completionRate').textContent = totalPercent + '%';

            document.getElementById('highCount').textContent = highTotal;
            document.getElementById('mediumCount').textContent = mediumTotal;
            document.getElementById('lowCount').textContent = lowTotal;

            document.getElementById('highCompleted').textContent = `${highCompleted}/${highTotal}`;
            document.getElementById('mediumCompleted').textContent = `${mediumCompleted}/${mediumTotal}`;
            document.getElementById('lowCompleted').textContent = `${lowCompleted}/${lowTotal}`;

            document.getElementById('highProgressFill').style.width = highPercent + '%';
            document.getElementById('mediumProgressFill').style.width = mediumPercent + '%';
            document.getElementById('lowProgressFill').style.width = lowPercent + '%';

            // æ›´æ–°å­¦ä¹ é˜¶æ®µ
            updatePhaseProgress(totalCompleted, totalItems);

            // æ›´æ–°æˆå°±ç³»ç»Ÿ
            updateAchievements(totalPercent);

            // æ›´æ–°å»ºè®®
            updateRecommendations(totalPercent, highPercent, mediumPercent, lowPercent);
        }

        // æ›´æ–°å­¦ä¹ é˜¶æ®µè¿›åº¦
        function updatePhaseProgress(completed, total) {
            const phase1Items = 
                Object.values(knowledgeBase.tricks).length +
                Object.values(knowledgeBase.formula).length +
                1; // ç¬¦å·æ©ç 
            
            const phase2Items = 
                Object.values(knowledgeBase.branchless).length +
                Object.values(knowledgeBase.gosper).length +
                Object.values(knowledgeBase.mux).length;
            
            const phase3Items = 
                Object.values(knowledgeBase.special).length +
                Object.values(knowledgeBase.boolean).length +
                Object.values(knowledgeBase.exercise).length;
            
            const phase4Items = 
                Object.values(knowledgeBase.history).length +
                Object.values(knowledgeBase.insight).length;

            // ç»Ÿè®¡å„é˜¶æ®µå®Œæˆæ•°
            let phase1Complete = 0, phase2Complete = 0, phase3Complete = 0, phase4Complete = 0;
            
            Object.values(knowledgeBase.tricks).forEach(item => {
                if (progress[item.id]) phase1Complete++;
            });
            Object.values(knowledgeBase.formula).forEach(item => {
                if (progress[item.id]) phase1Complete++;
            });

            Object.values(knowledgeBase.branchless).forEach(item => {
                if (progress[item.id]) phase2Complete++;
            });
            Object.values(knowledgeBase.gosper).forEach(item => {
                if (progress[item.id]) phase2Complete++;
            });
            Object.values(knowledgeBase.mux).forEach(item => {
                if (progress[item.id]) phase2Complete++;
            });

            Object.values(knowledgeBase.special).forEach(item => {
                if (progress[item.id]) phase3Complete++;
            });
            Object.values(knowledgeBase.boolean).forEach(item => {
                if (progress[item.id]) phase3Complete++;
            });
            Object.values(knowledgeBase.exercise).forEach(item => {
                if (progress[item.id]) phase3Complete++;
            });

            Object.values(knowledgeBase.history).forEach(item => {
                if (progress[item.id]) phase4Complete++;
            });
            Object.values(knowledgeBase.insight).forEach(item => {
                if (progress[item.id]) phase4Complete++;
            });

            const phase1Percent = Math.round(phase1Complete / phase1Items * 100);
            const phase2Percent = Math.round(phase2Complete / phase2Items * 100);
            const phase3Percent = Math.round(phase3Complete / phase3Items * 100);
            const phase4Percent = Math.round(phase4Complete / phase4Items * 100);

            document.getElementById('phase1Fill').style.width = phase1Percent + '%';
            document.getElementById('phase2Fill').style.width = phase2Percent + '%';
            document.getElementById('phase3Fill').style.width = phase3Percent + '%';
            document.getElementById('phase4Fill').style.width = phase4Percent + '%';
        }

        // æ›´æ–°æˆå°±ç³»ç»Ÿ
        function updateAchievements(percent) {
            const achievementBox = document.getElementById('achievementBox');
            let achievement = null;

            if (percent === 100) {
                achievement = {
                    icon: 'ğŸ†',
                    title: 'çŸ¥è¯†å¤§å¸ˆ',
                    desc: 'æ­å–œï¼æ‚¨å·²ç»å®Œå…¨æŒæ¡äº† Hacker\'s Delight Ch02 çš„æ‰€æœ‰çŸ¥è¯†ç‚¹ï¼'
                };
            } else if (percent >= 80) {
                achievement = {
                    icon: 'ğŸŒŸ',
                    title: 'è¿‘ä¹å®Œç¾',
                    desc: 'æ‚¨å·²ç»æŒæ¡äº†å¤§éƒ¨åˆ†å†…å®¹ï¼Œç»§ç»­åŠªåŠ›å®Œæˆå‰©ä½™çš„ ' + (100 - percent) + '% ï¼'
                };
            } else if (percent >= 60) {
                achievement = {
                    icon: 'ğŸš€',
                    title: 'å¿«é€Ÿè¿›å±•',
                    desc: 'ä½ çš„å­¦ä¹ è¿›åº¦å·²ç»è¶…è¿‡ 60%ï¼Œä¿æŒåŠ¨åŠ›ç»§ç»­å‰è¿›ï¼'
                };
            } else if (percent >= 40) {
                achievement = {
                    icon: 'ğŸ’ª',
                    title: 'ç¨³æ­¥å‰è¡Œ',
                    desc: 'ä½ å·²ç»å­¦ä¹ äº† 40% çš„å†…å®¹ï¼Œç»§ç»­åŠ æ²¹ï¼'
                };
            } else if (percent >= 20) {
                achievement = {
                    icon: 'ğŸ¯',
                    title: 'å…¥é—¨å¼€å§‹',
                    desc: 'ä½ å·²ç»å¼€å§‹å­¦ä¹ ï¼ŒåŠ æ²¹ï¼'
                };
            }

            if (achievement) {
                achievementBox.innerHTML = `
                    <div class="achievement-box">
                        <div class="achievement-icon">${achievement.icon}</div>
                        <div class="achievement-text">${achievement.title}</div>
                        <div class="achievement-desc">${achievement.desc}</div>
                    </div>
                `;
                achievementBox.style.animation = 'slideUp 0.6s ease-out';
            }
        }

        // æ›´æ–°å­¦ä¹ å»ºè®®
        function updateRecommendations(total, high, medium, low) {
            const recommendationContent = document.getElementById('recommendationContent');
            let recommendations = [];

            if (high < 100) {
                recommendations.push({
                    title: 'ä¼˜å…ˆå­¦ä¹ â­â­â­',
                    text: `æ‚¨çš„é«˜ä¼˜å…ˆçº§å†…å®¹å®Œæˆåº¦ä¸º ${high}%ï¼Œå»ºè®®é‡ç‚¹å­¦ä¹ è¿™äº›å…³é”®çŸ¥è¯†ç‚¹ï¼Œå®ƒä»¬æ˜¯åç»­å†…å®¹çš„åŸºç¡€ã€‚`
                });
            }

            if (medium < 100 && high === 100) {
                recommendations.push({
                    title: 'æ·±åŒ–ç†è§£â­â­',
                    text: `æ­å–œæŒæ¡åŸºç¡€ï¼ç°åœ¨å¯ä»¥å­¦ä¹ â­â­çº§åˆ«çš„å†…å®¹ï¼Œå®Œæˆåº¦ä¸º ${medium}%ã€‚`
                });
            }

            if (low < 100 && high === 100 && medium === 100) {
                recommendations.push({
                    title: 'æ‹“å±•è§†é‡â­',
                    text: `æ‚¨å·²ç»æŒæ¡æ ¸å¿ƒå†…å®¹ï¼Œç°åœ¨å¯ä»¥æ·±åŒ–å­¦ä¹ å‚è€ƒçº§åˆ«çš„çŸ¥è¯†ï¼Œå®Œæˆåº¦ä¸º ${low}%ã€‚`
                });
            }

            if (total >= 80) {
                recommendations.push({
                    title: 'åšç»ƒä¹ é¢˜',
                    text: 'ä½ å·²ç»æŒæ¡äº†å¤§éƒ¨åˆ†ç†è®ºçŸ¥è¯†ï¼Œç°åœ¨å»ºè®®åšè¯¾åä¹ é¢˜æ¥æ£€éªŒå­¦ä¹ æˆæœã€‚'
                });
            }

            if (total === 100) {
                recommendations.push({
                    title: 'åº”ç”¨å®è·µ',
                    text: 'å®Œç¾ï¼ç°åœ¨å¯ä»¥å°†çŸ¥è¯†åº”ç”¨åˆ°å®é™…çš„é¡¹ç›®ä¸­ï¼Œå¦‚æ£‹ç›˜å¼•æ“ã€ç¼–è¯‘å™¨ä¼˜åŒ–ç­‰é¢†åŸŸã€‚'
                });
            }

            recommendationContent.innerHTML = recommendations
                .map(rec => `
                    <div class="recommendation-item">
                        <div class="recommendation-title">${rec.title}</div>
                        <div class="recommendation-text">${rec.text}</div>
                    </div>
                `)
                .join('');
        }

        // è¿‡æ»¤é¡¹ç›®
        function filterItems(category, filter) {
            currentFilter[category] = filter;

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            const buttons = document.querySelectorAll(`#${category}-list`).parentElement.querySelectorAll('.filter-btn');
            // å®é™…ä¸Šè¿™ä¸ªé€‰æ‹©å™¨æœ‰é—®é¢˜ï¼Œè®©æˆ‘é‡æ–°å¤„ç†

            renderAllItems();
        }

        // æ ‡è®°å…¨éƒ¨å®Œæˆ
        function markAllCompleted() {
            if (!confirm('ç¡®å®šè¦æ ‡è®°æ‰€æœ‰çŸ¥è¯†ç‚¹ä¸ºå·²å®Œæˆå—ï¼Ÿ')) return;

            for (const items of Object.values(knowledgeBase)) {
                items.forEach(item => {
                    progress[item.id] = true;
                });
            }

            saveProgress();
            renderAllItems();
            updateAllProgress();
        }

        // é‡ç½®è¿›åº¦
        function resetProgress() {
            if (!confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰è¿›åº¦å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼')) return;

            for (const items of Object.values(knowledgeBase)) {
                items.forEach(item => {
                    progress[item.id] = false;
                });
            }

            saveProgress();
            renderAllItems();
            updateAllProgress();
        }

        // ä¿å­˜è¿›åº¦
        function saveProgress() {
            localStorage.setItem('ch02_progress', JSON.stringify(progress));
        }

        // å¯¼å‡ºæ•°æ®
        function exportData() {
            const data = {
                timestamp: new Date().toISOString(),
                progress: progress,
                stats: {
                    total: Object.keys(progress).length,
                    completed: Object.values(progress).filter(v => v).length
                }
            };

            const json = JSON.stringify(data, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ch02_progress_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // å¯¼å…¥æ•°æ®
        function importData() {
            document.getElementById('importFile').click();
        }

        // å¤„ç†å¯¼å…¥
        function handleImport(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const data = JSON.parse(e.target.result);
                    progress = data.progress;
                    saveProgress();
                    renderAllItems();
                    updateAllProgress();
                    alert('è¿›åº¦å¯¼å…¥æˆåŠŸï¼');
                } catch (error) {
                    alert('å¯¼å…¥å¤±è´¥ï¼Œæ–‡ä»¶æ ¼å¼é”™è¯¯');
                }
            };
            reader.readAsText(file);
        }

        // æ‰“å°è¿›åº¦
        function printProgress() {
            window.print();
        }

        // åˆå§‹åŒ–åº”ç”¨
        initializeProgress();
    </script>
</body>
</html>