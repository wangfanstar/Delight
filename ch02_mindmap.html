<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hacker's Delight Ch02 - å®Œæ•´æ€ç»´å¯¼å›¾</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11.12.3/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: slideDown 0.6s ease-out;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1em;
            opacity: 0.95;
        }

        .mindmap-container {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            overflow: auto;
            animation: fadeIn 0.6s ease-out;
            min-height: 1000px;
        }

        .mermaid {
            display: flex;
            justify-content: center;
        }

        .controls {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 30px;
            animation: slideUp 0.6s ease-out;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.95em;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #667eea;
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover {
            background: #5568d3;
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #f9f9f9;
            color: #333;
            border: 2px solid #ddd;
        }

        .btn-secondary:hover {
            background: #f0f7ff;
            border-color: #667eea;
        }

        .legend {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .legend-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .legend-item {
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }

        .legend-item-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-item-desc {
            font-size: 0.9em;
            color: #666;
            line-height: 1.5;
        }

        .priority-high {
            border-left-color: #d63031;
        }

        .priority-high .legend-item-title {
            color: #d63031;
        }

        .priority-medium {
            border-left-color: #f39c12;
        }

        .priority-medium .legend-item-title {
            color: #f39c12;
        }

        .priority-low {
            border-left-color: #00b894;
        }

        .priority-low .legend-item-title {
            color: #00b894;
        }

        .stats-section {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .stats-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            line-height: 1;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 0.95em;
            opacity: 0.95;
        }

        .keyboard-hint {
            background: linear-gradient(135deg, #667eea15, #764ba215);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            border-left: 3px solid #667eea;
        }

        .keyboard-hint strong {
            color: #667eea;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.6em;
            }

            .mindmap-container {
                padding: 20px;
            }

            .controls {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .legend-grid {
                grid-template-columns: 1fr;
            }
        }

        /* å·¦ä¾§ç« èŠ‚å¯¼èˆªæ  */
        .sidebar-nav {
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            width: 180px;
            z-index: 90;
            background: rgba(102, 126, 234, 0.95);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            padding: 1rem .5rem;
            overflow-y: auto;
            overflow-x: hidden;
            transition: transform .25s ease;
            display: flex;
            flex-direction: column;
        }

        .sidebar-nav::-webkit-scrollbar {
            width: 3px;
        }

        .sidebar-nav::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
        }

        .sidebar-title {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: .62rem;
            color: white;
            letter-spacing: .08em;
            padding: .4rem .6rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: .5rem;
            flex-shrink: 0;
            font-weight: bold;
        }

        .sidebar-section {
            margin-bottom: .6rem;
            display: flex;
            flex-direction: column;
        }

        .sidebar-section-title {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: .58rem;
            color: rgba(255, 255, 255, 0.8);
            padding: .3rem .6rem;
            letter-spacing: .05em;
            flex-shrink: 0;
        }

        .sidebar-link {
            display: block;
            width: 100%;
            clear: both;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: .68rem;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            padding: .25rem .6rem .25rem 1rem;
            border-radius: 3px;
            transition: all .15s;
            position: relative;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .sidebar-link:hover {
            color: white;
            background: rgba(255, 255, 255, 0.15);
        }

        .sidebar-link.active {
            color: white;
            background: rgba(255, 255, 255, 0.25);
        }

        .sidebar-link.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 2px;
            height: 14px;
            background: white;
            border-radius: 1px;
        }

        .sidebar-toggle {
            display: none;
            position: fixed;
            left: .5rem;
            top: .85rem;
            z-index: 95;
            width: 32px;
            height: 32px;
            background: rgba(102, 126, 234, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
        }

        @media(max-width: 1100px) {
            .sidebar-nav {
                transform: translateX(-100%);
            }

            .sidebar-nav.open {
                transform: translateX(0);
            }

            .sidebar-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            body {
                padding-left: 0 !important;
            }
        }

        @media(min-width: 1101px) {
            body {
                padding-left: 180px !important;
            }
        }
    </style>
</head>
<body>
    <!-- å·¦ä¾§ç« èŠ‚å¯¼èˆªæ  -->
    <button class="sidebar-toggle" onclick="document.querySelector('.sidebar-nav').classList.toggle('open')">â˜°</button>
    <nav class="sidebar-nav">
      <div class="sidebar-title">ğŸ“š CH02 å­¦ä¹ å¯¼èˆª</div>
      
      <div class="sidebar-section">
        <div class="sidebar-section">Ch.02 è¡¥å……é¡µé¢</div>
        <a href="ch02_quickref.html" class="sidebar-link">å¿«é€Ÿè®°å¿†å¡ç‰‡</a>
        <a href="ch02_interactive.html" class="sidebar-link">åŠ¨ç”»äº¤äº’å­¦ä¹ </a>
        <a href="ch02_mindmap.html" class="sidebar-link active">å®Œæ•´æ€ç»´å¯¼å›¾</a>
        <a href="ch02_anaylze.html" class="sidebar-link">çŸ¥è¯†ç‚¹ç»Ÿè®¡</a>
        <a href="ch02_check.html" class="sidebar-link">å­¦ä¹ è¿›åº¦è‡ªæŸ¥</a>
        <a href="ch02_summary.html" class="sidebar-link">çŸ¥è¯†ç‚¹ç»Ÿè®¡è¯¦è¡¨</a>
      </div>
      
      <div class="sidebar-section">
        <div class="sidebar-section-title">è¿”å›ä¸»é¡µé¢</div>
        <a href="ch02.html" class="sidebar-link">Ch.02 ä¸»ç« èŠ‚</a>
      </div>
    </nav>

    <div class="container">
 +++++++ REPLACE
        <!-- æ ‡é¢˜ -->
        <div class="header">
            <h1>ğŸ§  Hacker's Delight Ch02 - å®Œæ•´æ€ç»´å¯¼å›¾</h1>
            <p>ä½æ“ä½œçš„æ•°å­¦åŸºç¡€ä¸å·¥ç¨‹åº”ç”¨å®Œæ•´ä½“ç³»</p>
        </div>

        <!-- æ§åˆ¶æŒ‰é’® -->
        <div class="controls">
            <button class="btn btn-primary" onclick="downloadDiagram()">
                <span>ğŸ“¥</span>
                <span>ä¸‹è½½å›¾ç‰‡</span>
            </button>
            <button class="btn btn-secondary" onclick="printMindmap()">
                <span>ğŸ–¨ï¸</span>
                <span>æ‰“å°</span>
            </button>
            <button class="btn btn-secondary" onclick="toggleFullscreen()">
                <span>â›¶</span>
                <span>å…¨å±</span>
            </button>
        </div>

        <!-- é”®ç›˜æç¤º -->
        <div class="keyboard-hint">
            <strong>ğŸ’¡ æç¤ºï¼š</strong> ä½¿ç”¨ <strong>é¼ æ ‡æ»šè½®</strong> å¯ä»¥ä¸Šä¸‹æ»šåŠ¨å¯¼å›¾ | 
            <strong>æ‹–åŠ¨</strong>å¯ä»¥å¹³ç§»å¯¼å›¾ | 
            åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè‡ªåŠ¨å“åº”å¼å±•ç¤º
        </div>

        <!-- æ€ç»´å¯¼å›¾ -->
        <div class="mindmap-container" id="mindmapContainer">
            <div class="mermaid" id="mermaidDiagram">
%%{init: {'theme': 'base', 'themeVariables': { 'fontSize': '16px'}, 'logLevel':'fatal'}}%%
graph LR
    A["<b>Hacker's Delight Ch02<br/>ä½æ“ä½œåŸºç¡€</b><br/>142+ çŸ¥è¯†ç‚¹"]
    
    A --> B["ğŸ”§ TRICKS 01-08<br/>æœ€å³ä½æ“çºµ"]
    A --> C["â• æ’ç­‰å¼ 7ä¸ª<br/>åŠ å‡æ³•åˆ†è§£"]
    A --> D["âš¡ æ— åˆ†æ”¯ 6ä¸ª<br/>ç®—æœ¯æ“ä½œ"]
    A --> E["ğŸ”€ MUX 2ä¸ª<br/>å¤šè·¯é€‰æ‹©"]
    A --> F["ğŸŒŸ Gosper<br/>ç»„åˆæšä¸¾"]
    A --> G["ğŸ ç‰¹æ®ŠæŠ€å·§ 8ä¸ª"]
    A --> H["ğŸ“ å¸ƒå°”åˆ†è§£"]
    A --> I["â° å†å²æ¼”å˜ 6ä¸ª"]
    A --> J["ğŸ’­ æ·±åº¦ç‚¹è¯„ 5ä¸ª"]
    A --> K["âœï¸ è¯¾åä¹ é¢˜ 6ä¸ª"]
    
    B --> B1["TRICK 01 â­â­â­<br/>x & (x-1)<br/>æ¸…é™¤æœ€å³1"]
    B --> B2["TRICK 02 â­â­<br/>x | (x+1)<br/>ç½®ä½æœ€å³0"]
    B --> B3["TRICK 03 â­â­<br/>x & (x+1)<br/>æ¸…é™¤å°¾éƒ¨1"]
    B --> B4["TRICK 04 â­â­<br/>x | (x-1)<br/>ç½®ä½å°¾éƒ¨0"]
    B --> B5["TRICK 05 â­<br/>~x & (x+1)<br/>æœ€å³0æ©ç "]
    B --> B6["TRICK 06 â­â­â­<br/>x & (-x)<br/>æœ€å³1æ©ç <br/>æ£‹ç›˜å¼•æ“"]
    B --> B7["TRICK 07 â­<br/>~x & (x-1)<br/>å°¾éƒ¨0æ©ç "]
    B --> B8["TRICK 08 â­â­<br/>x | (x-1)<br/>å°¾éƒ¨1ä¼ æ’­"]
    
    C --> C1["æ’ç­‰å¼a â­â­â­<br/>x+y=(x^y)+<br/>((x&y)<<1)"]
    C --> C2["æ’ç­‰å¼b â­â­<br/>x+y=(x|y)+(x&y)"]
    C --> C3["æ’ç­‰å¼c â­<br/>x^y=(x+y)-<br/>((x&y)<<1)"]
    C --> C4["æ’ç­‰å¼d â­<br/>x|y=(x+y)-(x&y)"]
    C --> C5["æ’ç­‰å¼e â­â­<br/>x&y=(x|y)-(x^y)"]
    C --> C6["æ’ç­‰å¼f â­â­â­<br/>avg=(x&y)+<br/>((x^y)>>1)<br/>Dietzæ— æº¢å‡º"]
    C --> C7["æ’ç­‰å¼g â­<br/>x^y=(x|y)&~(x&y)"]
    
    D --> D1["ç¬¦å·æ©ç  â­â­<br/>mask = x >> 31"]
    D --> D2["abs(x) â­â­â­<br/>(x+mask)^mask<br/>3æŒ‡ä»¤"]
    D --> D3["min(x,y) â­â­<br/>y+((x-y)&<br/>((x-y)>>31))"]
    D --> D4["max(x,y) â­â­<br/>x-((x-y)&<br/>((x-y)>>31))"]
    D --> D5["avg(x,y) â­â­â­<br/>(x&y)+<br/>((x^y)>>1)<br/>SIMDå¿…ç”¨"]
    D --> D6["sign(x) â­â­<br/>(x>>31)|((-x)>>31)"]
    
    E --> E1["æ ‡å‡†MUX â­â­<br/>(x&m)|(y&~m)<br/>4æŒ‡ä»¤"]
    E --> E2["ä¼˜åŒ–MUX â­â­â­<br/>((x^y)&m)^y<br/>3æŒ‡ä»¤"]
    
    F --> F1["Step1: æå–æœ€ä½1<br/>c = x & (-x)"]
    F --> F2["Step2: çº§è”ç¿»è½¬<br/>r = x + c"]
    F --> F3["Step3: popcount<br/>ones=(((r^x)/c)>>2)+1"]
    F --> F4["æ•ˆæœ 100å€åŠ é€Ÿ<br/>ç»„åˆæšä¸¾æ•‘æ˜Ÿ"]
    
    G --> G1["æº¢å‡ºæ£€æµ‹ â­â­<br/>((x^sum)&(y^sum))>>31"]
    G --> G2["é¥±å’ŒåŠ æ³• â­<br/>QADD/QSUB<br/>éŸ³é¢‘å¤„ç†"]
    G --> G3["ç¬¦å·æ‰©å±• â­â­<br/>(x<<(32-n))>>(32-n)"]
    G --> G4["ä½åŸŸå¤„ç† â­<br/>æ©ç æ“ä½œ"]
    G --> G5["Hornerè§„åˆ™ â­â­<br/>å¤šé¡¹å¼ä¼˜åŒ–"]
    G --> G6["ä½åŸŸå¤åˆ¶ â­<br/>çº¹ç†åæ ‡"]
    G --> G7["å¤šå­—èŠ‚SIMD â­<br/>4xbyteå¹¶è¡Œ"]
    G --> G8["åŒå­—ç§»ä½ â­<br/>SHLD/SHRD"]
    
    H --> H1["å¸ƒå°”åˆ†è§£ â­â­<br/>Reed-Mullerå±•å¼€"]
    H --> H2["åº”ç”¨ â­â­<br/>SHA-256<br/>å¯†ç å­¦åŸè¯­"]
    
    I --> I1["1961 Strachey"]
    I --> I2["1972 HAKMEM â­â­"]
    I --> I3["1986 Dietz"]
    I --> I4["1992 GCC"]
    I --> I5["2006 JDK bug â­â­"]
    I --> I6["2013 BMI1-2 â­â­"]
    
    J --> J1["åˆ†æ”¯é¢„æµ‹é™·é˜± â­â­â­<br/>10-20å‘¨æœŸæŸå¤±"]
    J --> J2["æ•´æ•°æº¢å‡ºå®‰å…¨ â­â­â­<br/>Dietzä»·å€¼"]
    J --> J3["GosperåŠ é€Ÿ â­â­â­<br/>100å€"]
    J --> J4["è¯­è¨€å·®å¼‚ â­â­<br/>Rust/Java/C23"]
    J --> J5["å¯æ¨å¹¿æ–¹å‘ â­â­<br/>SIMD/GPU/å¯†ç å­¦"]
    
    K --> K1["Q11 å¸ƒå°”åˆ†è§£ â­â­â­<br/>ç†è®ºæ€è€ƒ"]
    K --> K2["Q3 Dietzè¯æ˜ â­â­<br/>æ•°å­¦æ¨å¯¼"]
    K --> K3["Q8 MUXä¼˜åŒ– â­â­<br/>ç­‰ä»·æ€§"]
    K --> K4["Q5 æ¯”è¾ƒç®€åŒ– â­â­<br/>ä¸“å®¶ä¼˜åŒ–"]
    K --> K5["Q4 å››æ•°å¹³å‡ â­â­<br/>é€’å½’åº”ç”¨"]
    K --> K6["Q10 ä½å¤åˆ¶ â­<br/>ç»„åˆåº”ç”¨"]
    
    style A fill:#667eea,stroke:#333,stroke-width:3px,color:#fff
    style B fill:#e8f0ff,stroke:#667eea,stroke-width:2px
    style C fill:#e8f0ff,stroke:#667eea,stroke-width:2px
    style D fill:#e8f0ff,stroke:#667eea,stroke-width:2px
    style E fill:#e8f0ff,stroke:#667eea,stroke-width:2px
    style F fill:#fff4e6,stroke:#f39c12,stroke-width:2px
    style G fill:#e8f0ff,stroke:#667eea,stroke-width:2px
    style H fill:#e8f0ff,stroke:#667eea,stroke-width:2px
    style I fill:#f0f0f0,stroke:#999,stroke-width:2px
    style J fill:#fff4e6,stroke:#f39c12,stroke-width:2px
    style K fill:#fff0f0,stroke:#d63031,stroke-width:2px
            </div>
        </div>

        <!-- å›¾ä¾‹è¯´æ˜ -->
        <div class="legend">
            <div class="legend-title">ğŸ“– çŸ¥è¯†ç‚¹ç­‰çº§è¯´æ˜</div>
            <div class="legend-grid">
                <div class="legend-item priority-high">
                    <div class="legend-item-title">
                        <span>â­â­â­</span>
                        <span>å¿…å­¦ï¼ˆå…³é”®åŸºç¡€ï¼‰</span>
                    </div>
                    <div class="legend-item-desc">
                        <strong>åŒ…æ‹¬ï¼š</strong>TRICK01ã€TRICK06ã€ç‹ç‰Œæ’ç­‰å¼ã€Dietzå¹³å‡ã€æ— åˆ†æ”¯absã€Gosper's Hackã€åˆ†æ”¯é¢„æµ‹é™·é˜±
                        <br/><strong>è¦æ±‚ï¼š</strong>æ·±å…¥ç†è§£åŸç†å’Œåº”ç”¨ï¼Œå¿…é¡»æŒæ¡
                        <br/><strong>å½±å“ï¼š</strong>ç›´æ¥å½±å“åç»­å­¦ä¹ æ•ˆæœå’Œä»£ç æ€§èƒ½ä¼˜åŒ–èƒ½åŠ›
                    </div>
                </div>

                <div class="legend-item priority-medium">
                    <div class="legend-item-title">
                        <span>â­â­</span>
                        <span>é‡è¦ï¼ˆæ·±åº¦ç†è§£ï¼‰</span>
                    </div>
                    <div class="legend-item-desc">
                        <strong>åŒ…æ‹¬ï¼š</strong>å…¶ä»–TRICKSã€æ’ç­‰å¼ã€æ— åˆ†æ”¯min/maxã€MUXã€ç¬¦å·æ©ç ã€ç‰¹æ®ŠæŠ€å·§
                        <br/><strong>è¦æ±‚ï¼š</strong>å……åˆ†æŒæ¡ï¼Œèƒ½å¤Ÿçµæ´»åº”ç”¨
                        <br/><strong>å½±å“ï¼š</strong>å·¥ç¨‹å®è·µä¸­ç»å¸¸ç”¨åˆ°ï¼Œæ€§èƒ½ä¼˜åŒ–çš„ä¸»è¦å·¥å…·
                    </div>
                </div>

                <div class="legend-item priority-low">
                    <div class="legend-item-title">
                        <span>â­</span>
                        <span>å‚è€ƒï¼ˆæ‹“å±•è®¤çŸ¥ï¼‰</span>
                    </div>
                    <div class="legend-item-desc">
                        <strong>åŒ…æ‹¬ï¼š</strong>éƒ¨åˆ†æŠ€å·§ã€å¸ƒå°”åˆ†è§£ã€å†å²æ¼”å˜ã€éƒ¨åˆ†ä¹ é¢˜
                        <br/><strong>è¦æ±‚ï¼š</strong>äº†è§£å³å¯ï¼Œæœ‰åŠ©äºå»ºç«‹å®Œæ•´çŸ¥è¯†ä½“ç³»
                        <br/><strong>å½±å“ï¼š</strong>æå‡ç†è®ºå®Œæ•´æ€§å’Œåº”ç”¨å¹¿åº¦
                    </div>
                </div>

                <div class="legend-item" style="border-left-color: #3498db;">
                    <div class="legend-item-title" style="color: #3498db;">
                        <span>ğŸ’¡</span>
                        <span>5å¤§æ ¸å¿ƒæ¦‚å¿µ</span>
                    </div>
                    <div class="legend-item-desc">
                        <strong>1) è¡¥ç è¿›ä½ç©¿é€æ€§</strong> - TRICKSåŸºç¡€
                        <br/><strong>2) åŠ æ³•åˆ†è§£æ’ç­‰å¼</strong> - è®¡ç®—åŸºç¡€
                        <br/><strong>3) ç¬¦å·æ©ç æ— åˆ†æ”¯</strong> - æ€§èƒ½å…³é”®
                        <br/><strong>4) Dietzæ— æº¢å‡ºå¹³å‡</strong> - å®‰å…¨ä¿éšœ
                        <br/><strong>5) Gosperç»„åˆæ–¹æ³•</strong> - ä¼˜åŒ–æé™
                    </div>
                </div>

                <div class="legend-item" style="border-left-color: #e67e22;">
                    <div class="legend-item-title" style="color: #e67e22;">
                        <span>ğŸš€</span>
                        <span>æ€§èƒ½æå‡å€æ•°</span>
                    </div>
                    <div class="legend-item-desc">
                        <strong>æ— åˆ†æ”¯absï¼š</strong> å¿«5-10å€ (åˆ†æ”¯é¢„æµ‹å¤±è´¥æŸå¤±)
                        <br/><strong>Gosper's Hackï¼š</strong> å¿«100å€ (ç»„åˆæšä¸¾)
                        <br/><strong>MUXä¼˜åŒ–ï¼š</strong> å¿«25% (æŒ‡ä»¤å‡å°‘)
                        <br/><strong>æ€»ä½“æå‡ï¼š</strong> é¡¹ç›®å¹³å‡å¿«2-5å€
                    </div>
                </div>

                <div class="legend-item" style="border-left-color: #9b59b6;">
                    <div class="legend-item-title" style="color: #9b59b6;">
                        <span>âš ï¸</span>
                        <span>å…³é”®å®‰å…¨é—®é¢˜</span>
                    </div>
                    <div class="legend-item-desc">
                        <strong>JDKæº¢å‡ºbugï¼š</strong> äºŒåˆ†æœç´¢æ½œä¼10å¹´
                        <br/><strong>ä¾§ä¿¡é“æ”»å‡»ï¼š</strong> åˆ†æ”¯é¢„æµ‹æ³„æ¼å¯†é’¥
                        <br/><strong>æœ‰ç¬¦å·å·®å¼‚ï¼š</strong> Rust/Javaå¤„ç†ä¸åŒ
                        <br/><strong>å¯¹ç­–ï¼š</strong> å¿…é¡»ä½¿ç”¨Dietzå…¬å¼å’Œå¸¸æ•°æ—¶é—´ç¼–ç¨‹
                    </div>
                </div>
            </div>
        </div>

        <!-- ç»Ÿè®¡æ•°æ® -->
        <div class="stats-section">
            <div class="stats-title">ğŸ“Š çŸ¥è¯†ä½“ç³»ç»Ÿè®¡</div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">142+</div>
                    <div class="stat-label">æ€»çŸ¥è¯†ç‚¹</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">10</div>
                    <div class="stat-label">ä¸»è¦åˆ†ç±»</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">46</div>
                    <div class="stat-label">æ ¸å¿ƒæŠ€å·§</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">5</div>
                    <div class="stat-label">æ ¸å¿ƒæ¦‚å¿µ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">20+</div>
                    <div class="stat-label">åº”ç”¨åœºæ™¯</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">100x</div>
                    <div class="stat-label">æœ€å¤§åŠ é€Ÿå€æ•°</div>
                </div>
            </div>
        </div>

        <!-- å­¦ä¹ è·¯å¾„ -->
        <div class="stats-section">
            <div class="stats-title">ğŸ¯ æ¨èå­¦ä¹ è·¯å¾„ï¼ˆ4é˜¶æ®µï¼Œ25å¤©ï¼‰</div>
            <div class="legend-grid">
                <div class="legend-item">
                    <div class="legend-item-title" style="color: #667eea;">
                        <span>1ï¸âƒ£</span>
                        <span>ç¬¬1é˜¶æ®µï¼šåŸºç¡€æŒæ¡ï¼ˆ3å¤©ï¼‰</span>
                    </div>
                    <div class="legend-item-desc">
                        <strong>å†…å®¹ï¼š</strong> 8ä¸ªTRICKS + 7ä¸ªæ’ç­‰å¼ + ç¬¦å·æ©ç 
                        <br/><strong>äº§å‡ºï¼š</strong> ç†è§£ä½æ“ä½œæ•°å­¦æœ¬è´¨å’Œè¡¥ç åŸç†
                        <br/><strong>æ—¶é—´ï¼š</strong> æ¯å¤©1-2å°æ—¶é˜…è¯»ç†è®º
                        <br/><strong>å®Œæˆæ ‡å¿—ï¼š</strong> èƒ½æ‰‹æ¨æ¼”ç®—TRICK01-08
                    </div>
                </div>

                <div class="legend-item">
                    <div class="legend-item-title" style="color: #764ba2;">
                        <span>2ï¸âƒ£</span>
                        <span>ç¬¬2é˜¶æ®µï¼šå®æˆ˜åº”ç”¨ï¼ˆ5å¤©ï¼‰</span>
                    </div>
                    <div class="legend-item-desc">
                        <strong>å†…å®¹ï¼š</strong> 6ä¸ªæ— åˆ†æ­¢æ“ä½œ + Gosper's Hack + MUXä¼˜åŒ–
                        <br/><strong>äº§å‡ºï¼š</strong> èƒ½ä¼˜åŒ–çœŸå®ä»£ç ï¼Œæ€§èƒ½æå‡5-100å€
                        <br/><strong>æ—¶é—´ï¼š</strong> æ¯å¤©2å°æ—¶å®ç°å’ŒåŸºå‡†æµ‹è¯•
                        <br/><strong>å®Œæˆæ ‡å¿—ï¼š</strong> å®Œæˆæ€§èƒ½æµ‹è¯•å¯¹æ¯”
                    </div>
                </div>

                <div class="legend-item">
                    <div class="legend-item-title" style="color: #f39c12;">
                        <span>3ï¸âƒ£</span>
                        <span>ç¬¬3é˜¶æ®µï¼šæ·±åŒ–ç†è®ºï¼ˆ7å¤©ï¼‰</span>
                    </div>
                    <div class="legend-item-desc">
                        <strong>å†…å®¹ï¼š</strong> ç‰¹æ®ŠæŠ€å·§ + å¸ƒå°”åˆ†è§£ + è¯¾åä¹ é¢˜
                        <br/><strong>äº§å‡ºï¼š</strong> ç†è®ºå®Œæ•´æ€§å’Œè¯æ˜èƒ½åŠ›
                        <br/><strong>æ—¶é—´ï¼š</strong> æ¯å¤©2-3å°æ—¶ç†è®ºè¯æ˜å’Œä¹ é¢˜
                        <br/><strong>å®Œæˆæ ‡å¿—ï¼š</strong> å®ŒæˆQ11ç­‰å…³é”®ä¹ é¢˜
                    </div>
                </div>

                <div class="legend-item">
                    <div class="legend-item-title" style="color: #00b894;">
                        <span>4ï¸âƒ£</span>
                        <span>ç¬¬4é˜¶æ®µï¼šåº”ç”¨è¿ç§»ï¼ˆ10å¤©ï¼‰</span>
                    </div>
                    <div class="legend-item-desc">
                        <strong>å†…å®¹ï¼š</strong> 20+åº”ç”¨åœºæ™¯ + å†å²æ¼”å˜ + è·¨é¢†åŸŸåº”ç”¨
                        <br/><strong>äº§å‡ºï¼š</strong> ç³»ç»Ÿæ€§å·¥ç¨‹è§†é‡å’Œé¡¹ç›®å®æˆ˜
                        <br/><strong>æ—¶é—´ï¼š</strong> æ¯å¤©2å°æ—¶æ¡ˆä¾‹ç ”ç©¶å’Œé¡¹ç›®å®è·µ
                        <br/><strong>å®Œæˆæ ‡å¿—ï¼š</strong> å®Œæˆ1ä¸ªé¡¹ç›®å®æˆ˜ï¼ˆæ£‹ç›˜å¼•æ“/ç¼–è¯‘å™¨ä¼˜åŒ–ç­‰ï¼‰
                    </div>
                </div>
            </div>
        </div>

        <!-- åº”ç”¨åœºæ™¯ -->
        <div class="stats-section">
            <div class="stats-title">ğŸ“ 20+ åº”ç”¨åœºæ™¯</div>
            <div class="legend-grid">
                <div class="legend-item">
                    <div class="legend-item-title" style="color: #667eea;">
                        <span>æ ¸å¿ƒåº”ç”¨</span>
                    </div>
                    <div class="legend-item-desc">
                        â€¢ æ£‹ç›˜å¼•æ“ (bitboard) - TRICK06 + Gosper
                        <br/>â€¢ å¯†ç å­¦æ’å®šæ—¶é—´ - æ— åˆ†æ”¯ç®—æœ¯
                        <br/>â€¢ SIMDå‘é‡åŒ– - Dietzå¹³å‡ + æ— æº¢å‡º
                        <br/>â€¢ ç¥ç»ç½‘ç»œç¨€ç– - ä½å›¾ä¼˜åŒ–
                    </div>
                </div>

                <div class="legend-item">
                    <div class="legend-item-title" style="color: #764ba2;">
                        <span>ç®—æ³•ä¼˜åŒ–</span>
                    </div>
                    <div class="legend-item-desc">
                        â€¢ èƒŒåŒ…é—®é¢˜ (DP) - çŠ¶æ€å‹ç¼©
                        <br/>â€¢ äºŒåˆ†æœç´¢ - Dietzå¹³å‡
                        <br/>â€¢ å­é›†æšä¸¾ - TRICK 08
                        <br/>â€¢ ç»„åˆæšä¸¾ - Gosper's Hack
                    </div>
                </div>

                <div class="legend-item">
                    <div class="legend-item-title" style="color: #f39c12;">
                        <span>ç³»ç»Ÿä¼˜åŒ–</span>
                    </div>
                    <div class="legend-item-desc">
                        â€¢ ç¼–è¯‘å™¨ä¼˜åŒ– - GCC/LLVM
                        <br/>â€¢ ç¡¬ä»¶è®¾è®¡ - Verilogå®ç°
                        <br/>â€¢ å†…å­˜ç®¡ç† - å¯¹é½è®¡ç®—
                        <br/>â€¢ ç¼“å­˜ä¼˜åŒ– - è®¿é—®æ¨¡å¼
                    </div>
                </div>

                <div class="legend-item">
                    <div class="legend-item-title" style="color: #00b894;">
                        <span>æ•°æ®å¤„ç†</span>
                    </div>
                    <div class="legend-item-desc">
                        â€¢ å›¾åƒå¤„ç† - SIMDåŠ é€Ÿ
                        <br/>â€¢ éŸ³é¢‘å¤„ç† - é¥±å’ŒåŠ æ³•
                        <br/>â€¢ å“ˆå¸Œå‡½æ•° - Hornerè§„åˆ™
                        <br/>â€¢ æ ¡éªŒç  - é”™è¯¯æ£€æµ‹
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            logLevel: 'fatal',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });

        // ä¸‹è½½å›¾ç‰‡
        function downloadDiagram() {
            const svg = document.querySelector('.mermaid svg');
            if (!svg) {
                alert('å¯¼å›¾æœªåŠ è½½ï¼Œè¯·ç¨å€™...');
                return;
            }

            try {
                const svgData = new XMLSerializer().serializeToString(svg);
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const img = new Image();
                
                canvas.width = svg.width.baseVal.value;
                canvas.height = svg.height.baseVal.value;
                
                img.onload = function() {
                    ctx.drawImage(img, 0, 0);
                    const link = document.createElement('a');
                    link.href = canvas.toDataURL('image/png');
                    link.download = 'ch02_mindmap.png';
                    link.click();
                };
                
                img.src = 'data:image/svg+xml;base64,' + btoa(svgData);
            } catch (e) {
                // é™çº§æ–¹æ¡ˆï¼šç›´æ¥ä¸‹è½½SVG
                const svgData = new XMLSerializer().serializeToString(svg);
                const blob = new Blob([svgData], { type: 'image/svg+xml' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'ch02_mindmap.svg';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
        }

        // æ‰“å°
        function printMindmap() {
            window.print();
        }

        // å…¨å±
        function toggleFullscreen() {
            const container = document.getElementById('mindmapContainer');
            if (!document.fullscreenElement) {
                container.requestFullscreen().catch(err => {
                    alert(`æ— æ³•è¿›å…¥å…¨å±: ${err.message}`);
                });
            } else {
                document.exitFullscreen();
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåå¤„ç†
        window.addEventListener('load', function() {
            setTimeout(() => {
                mermaid.contentLoaded();
            }, 500);
        });
    </script>
</body>
</html>